<%- include("../partials/adminHeader") %>

<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css">
</head>

<style>
    .col-md-3 {
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 10px;
        margin: 10px;
    }

    .form-label {
        margin-bottom: 8px;
    }

    .form-control {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
    }

    .d-grid {
        margin-top: 20px;
    }

    .btn-primary {
        background-color: #007bff;
        color: #fff;
        border: 1px solid #007bff;
        border-radius: 5px;
        padding: 10px 20px;
        cursor: pointer;
    }

    .btn-primary:hover {
        background-color: #0056b3;
        border-color: #0056b3;
    }

    .btn-danger {
        background-color: #dc3545;
        border: none;
    }

    .btn-danger:hover {
        background-color: #c82333;
    }

    .btn-secondary {
        margin-top: 10px;
    }
</style>

<section class="content-main">
    <div class="content-header">
        <div>
            <h2 class="content-title card-title">Add category </h2>
        </div>
    </div>

    <div class="card">
        <div class="card-body">
            <div class="row">
                <div class="col-md-3">
                    <form action="/admin/addCategory" method="post">
                        <div class="mb-4">
                            <label class="form-label">Category Name</label>
                            <input type="text" name="name" class="form-control" required>
                        </div>
                    
                        <div class="mb-4">
                            <label class="form-label">Description</label>
                            <textarea name="description" class="form-control" required></textarea>
                        </div>
                    
                        <div class="mb-4">
                            <label class="form-label">Subcategories</label>
                            <div id="subcategories-container">
                                <div class="subcategory-item mb-2">
                                    <input type="text" name="newSubCategory[0][subcategoryName]" class="form-control" placeholder="Subcategory Name" required>
                                    <input type="checkbox" name="newSubCategory[0][isListed]" value="true"> Listed
                                </div>
                            </div>
                    
                            <button type="button" class="btn btn-secondary" onclick="addSubcategory()">Add Subcategory</button>
                        </div>
                    
                        <button type="submit" class="btn btn-primary">Add Category</button>
                    </form>
                                        
                </div>
            </div>
        </div>
    </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<script>
let subcategoryIndex = 1;

function addSubcategory() {
    const container = document.getElementById('subcategories-container');
    const subcategoryHTML = `
        <div class="subcategory-item mb-2">
            <input type="text" name="newSubCategory[${subcategoryIndex}][subcategoryName]" class="form-control" placeholder="Subcategory Name" required>
            <input type="checkbox" name="newSubCategory[${subcategoryIndex}][isListed]" value="true"> Listed
        </div>
    `;
    container.insertAdjacentHTML('beforeend', subcategoryHTML);
    subcategoryIndex++;
}

</script>

<%- include("../partials/adminFooter") %>